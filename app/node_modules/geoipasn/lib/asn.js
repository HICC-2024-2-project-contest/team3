"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,exports.query=query;var _fs=_interopRequireDefault(require("fs")),_ip=_interopRequireDefault(require("@amuject/ip")),_path=_interopRequireDefault(require("path")),_url=require("url");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const ___filename=(0,_url.fileURLToPath)(require("url").pathToFileURL(__filename).toString()),___dirname=_path.default.dirname(___filename),ip2as=JSON.parse(_fs.default.readFileSync(_path.default.resolve(___dirname,"../data/IPv4-ASN.json"))),as2name=JSON.parse(_fs.default.readFileSync(_path.default.resolve(___dirname,"../data/ASN-name.json")));function query(ip){"string"==typeof ip&&(ip=new _ip.default(ip));let result={ip:ip,number:null,name:""};if(!ip2as||!as2name)return result;const[ip1,ip2]=ip.label.split(/\.(\d+\.\d+\.\d+)$/s);if(!ip1)return result;for(const ip2s in ip2as[ip1])if(ip.in(new _ip.default(ip1+"."+ip2s))){result.number=ip2as[ip1][ip2s],result.name=as2name[result.number];break}return result}var _default=exports.default=query;